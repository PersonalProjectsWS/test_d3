<!DOCTYPE html>
<html>
   <head>
      <script type = "text/javascript" src = "https://d3js.org/d3.v4.min.js"></script>
      <title>Campeones de la Ueffa Champions League</title>
   </head>
   <style>
        svg rect {
           fill: #162E58;
        }

        svg rect:hover{
            fill: #254e95;
            cursor: pointer;
        }
        
        svg text {
           fill: rgb(15, 15, 15);
           font: 12px sans-serif;
           text-anchor: start;
        }
     </style>
   <body>
      <h3>Uefa Champions Leage</h3>
      <script>
            const data = [
                {
                    name: "Real Madrid",
                    champions: 13,
                    img: "./assets/real-madrid.svg"
                },
                {
                    name: "Milan",
                    champions: 7,
                    img: "./assets/milan.svg"
                },
                {
                    name: "Liverpool",
                    champions: 6,
                    img: "./assets/liverpool.svg"
                },
                {
                    name: "Barcelona",
                    champions: 5,
                    img: "./assets/barcelona.svg"
                },
                {
                    name: "Bayern de Munich",
                    champions: 5,
                    img: "./assets/bayen-munchen.svg"
                },
                {
                    name: "Ajax",
                    champions: 4,
                    img: './assets/ajax.svg'
                },
                {
                    name: "Inter de Milán",
                    champions: 3,
                    img: './assets/inter.svg'
                },
                {
                    name: "Manchester United",
                    champions: 3,
                    img: './assets/man-united.svg'
                },
                {
                    name: "Juventus de Turín",
                    champions: 2,
                    img: './assets/juventus.svg'
                },
                {
                    name: "Benfica",
                    champions: 2,
                    img: './assets/benfica.svg'
                },
                {
                    name: "Oporto",
                    champions: 2,
                    img: './assets/porto.svg'
                },
                {
                    name: "Nottingham Forest",
                    champions: 2,
                    img: './assets/nottingham-forest.svg'
                }
            ];
            
            const width = 1000,
               scaleFactor = 20,
               barHeight = 30,
               marginLeft = 30;

            const graph = d3.select("body")
                .append("svg")
                .attr("width", width)
                .attr("height", barHeight * data.length);

            const bar = graph.selectAll("g") 
                .data(data)
                .enter()
                .append("g")
                .attr("transform", (d, i) => {
                    return "translate(0," + i * barHeight + ")"; 
                });
                
            bar.append("rect")
                .attr("width", (d) => {
                    return d.champions * scaleFactor + marginLeft;
                })
                .attr('x', 150)
                .attr("height", barHeight - 1);

            bar.append("svg:image")
                .attr('x', 2)
                .attr('y', 3)
                .attr('width', 18)
                .attr('height', 22)
                .attr("xlink:href", (d) => {
                    return d.img;
                });

            bar.append("text")
                .attr("x", 30)
                .attr("y", barHeight / 2)
                .attr("dy", ".25em")
                .text((d) => { return `${d.name}`; });
            
            bar.append("text")
                .attr("x", (d) => {
                    return d.champions * scaleFactor + 200;
                })
                .attr("y", barHeight / 2)
                .attr("dy", ".25em")
                .attr("style", "text-anchor: end; fill: #254e95; font-weight: bolder")
                .text((d) => d.champions);

            d3.selectAll("rect")
                .on("click", (d) => alert(`El ${d.name} ha ganado: ${d.champions} Champions League`));
         </script>
   </body>
</html>